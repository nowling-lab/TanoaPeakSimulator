import argparse
import os

from caller import call_peaks

def do_call_peaks(args):
    """
    Checks the arguments and calls the calls peaks method within the caller directory
    :params args: the arguments given from argparse, depth-file and outputdir
    """
    if not os.path.exists(args.outputdir):
      os.makedirs(args.outputdir)

    if args.depth_file is None:
        print("Path specified to depth file is invalid")
        return 

    call_peaks(args.depth_file)

def parseargs():
    """
    generates and returns a namespace for the argument parser
    """
    parser = argparse.ArgumentParser(description="Caller")

    parser.add_argument("--depth-file",
                        type=str,
                        required=True,
                        help="Depth File with in chromosome,position,reads format")

    parser.add_argument("--outputdir",
                        type=str,
                        required=True,
                        help="Output file directory")

    return parser.parse_args()

if __name__ == "__main__":
    args = parseargs()
    do_call_peaks(args)